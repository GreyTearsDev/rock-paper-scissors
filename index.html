<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" display="width=device-width, initial-scale 1.0">
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <div class="sections">
      <button id="rock">Rock</button>
      <button id="paper">Paper</button>
      <button id="scissors">Scissors</button>
    </div>

    <div class="rounds-left"></div>
    <div class="round-winner"></div>
    <div class="game-winner"></div>


    <script>
      const rock = document.getElementById('rock');
      const paper = document.getElementById('paper');
      const scissors = document.getElementById('scissors');
      const choices = ['Rock', 'Paper', 'Scissors']

      function getComputerChoice() {
        const randomChoice = Math.floor(Math.random() * choices.length);
        return choices[randomChoice];
      }
      
      const computerReading = getComputerChoice()
      

      // Checks for the winner 
      let resultOfRound;

      function playRound (playerSelection, computerSelection) {
        if ((playerSelection === 'rock' && computerSelection === 'paper')
          || (playerSelection === 'paper' && computerSelection === 'scissors')
          || (playerSelection === 'scissors' && computerSelection === 'rock')) {
            return resultOfRound = 'You lose';
        } else if (playerSelection === computerSelection) {
            return resultOfRound = 'It\'s a draw';
        } else {
            return resultOfRound = 'You win';
        }
      }


      function game() {
        let roundCounter = 5;
        let playerScore = 0;
        let computerScore = 0;
        let roundsLeft = document.querySelector('.rounds-left');
        let roundWinnerMessage = document.querySelector('round-winner');
        let gameWinnerMessage = document.querySelector('game-winner');


        for (let i = 0; i < 5; i++) {

          roundLeft.textContent = `ROUNDS LEFT: ${roundCounter--}`;

          //Listens  for user clicks
          rock.addEventListener('click', () => playRound('rock', computerReading))
          paper.addEventListener('click', () => playRound('paper', computerReading))
          scissors.addEventListener('click', () => playRound('scissors', computerReading))
          

          // Checks if rock wins
          if (rock.addEventListener('click', () => playRound('rock', computerReading))) {
            
            if (resultOfRound == 'You win') {
              roundWinnerMessage.textContent = `You win! Rock beats ${computerReading}`;
              playerScore = playerScore + 1;
            } else if (resultOfRound == 'It\'s a draw') {
              roundWinnerMessage.textContent = 'It\'s a draw! Both you and the computer chose "Rock".'
            } else (resultOfRound == 'You lose') {
              roundWinnerMessage.textContent = `You lose! ${computerReading} beats Rock`;
              computerScore = computerScore + 1;
            }
          }
          
        }
        let finalScore = `FINAL SCORE: 
        You: ${playerScore} || Computer: ${computerScore}`;

        function gameWinner (playerScore, computerScore) {
          if (playerScore < computerScore) {
            gameWinnerMessage.textContent = ' YOU WON';
          } else if (playerScore > computerScore) {
            gameWinnerMessage.textContent = 'YOU LOST';
          } else (playerScore === computerScore) {
            gameWinnerMessage.textContent = 'IT\'S A DRAW';
          }
        }

        gameWinner()
      }

      game();
      
    </script>
  </body>
</html>